webpackJsonp([4],{"/Heu":function(e,a,t){"use strict";var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("MICi"),i=t.n(o),c={props:["value","placeholder","isShowNull","disabled"],data:function(){return{myValue:"",list:[]}},created:function(){this.myValue=i()(parseInt(this.value))?"":parseInt(this.value),this.init()},methods:{init:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getData();case 2:case"end":return a.stop()}},a,e)}))()},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_BANK_LIST");case 2:(t=a.sent)&&0===t.status_code&&(e.list=t.result);case 4:case"end":return a.stop()}},a,e)}))()},change:function(){this.$emit("input",this.myValue)}},watch:{value:function(e){var a=parseInt(e);this.myValue="number"!=typeof a||i()(a)?null:a}}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-select",{staticClass:"w100",attrs:{placeholder:e.placeholder,clearable:"",disabled:e.disabled},on:{change:e.change},model:{value:e.myValue,callback:function(a){e.myValue=a},expression:"myValue"}},[e.isShowNull?t("el-option",{attrs:{label:"请选择",value:""}}):e._e(),e._v(" "),e._l(e.list,function(e,a){return t("el-option",{key:a,attrs:{value:a,label:e}})})],2)],1)},staticRenderFns:[]},_=t("VU/8")(c,u,!1,null,null,null);a.a=_.exports},"0Srm":function(e,a,t){"use strict";var s=t("/5sW");a.a=new s.default},"0gVd":function(e,a){},"1NQC":function(e,a){},"4Por":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("M6Pq"),i=t("0Srm"),c=t("A7zI"),u=t("gHwQ"),_=t("HGAp"),m={name:"AgentList",mixins:[o.a],components:{BaseDialog:u.a,HasDetail:c.a,SelectChoose:_.a},data:function(){return{dialogSet:{title:"离司申请",sendDialog:!1},dialogAgentMove:{title:"迁移",sendDialog:!1},type:"",isShowInput:!1,ruleForm:{reason:""},pageValue:{},formRule:{t_code:"",u_agentName:"",after_jg_id:"",u_code:"",u_name:"",reason:""},searchData:{o_id:"",ag_name:"",jg_id:"",ref_id:"",ag_join_date:"",ag_job_number:"",ag_status:"",t_id:"",ag_leader:"",ag_code:"",page:1},searchForm:{o_name:"",o_g_id:"",o_status:""},sumTotal:"",isDisabled:!0,listId:{},currentPage:1,tableData:[],optionFrom:[]}},watch:{type:function(e){4===Number(e)?this.isShowInput=!0:(this.ruleForm.reason="",this.isShowInput=!1)}},methods:{getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.searchData.ag_join_date||(e.searchData.ag_join_date=""),a.next=4,e.$axios.send("AGENT_MENAGE_LIST",e.searchData);case 4:0===(t=a.sent).status_code&&(e.tableData=t.result.data,e.sumTotal=t.result.total,e.isDisabled=!0);case 6:case"end":return a.stop()}},a,e)}))()},handleSearch:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.currentPage=1,e.searchData.page=1,e.getData();case 3:case"end":return a.stop()}},a,e)}))()},jumpEditPage:function(){this.$router.push({name:"代理人修改",params:{id:this.listId.ag_id,name:this.listId.ag_status}})},handleReset:function(){this.searchData={o_id:"",ag_name:"",jg_id:"",ref_id:"",ag_join_date:"",ag_job_number:"",ag_status:"",t_id:"",ag_leader:"",ag_code:"",page:1}},handleBack:function(e){this.dialogSet.sendDialog=!0,this.type=""},handleMove:function(e){this.$refs[e].resetFields(),this.formRule={t_code:"",u_agentName:"",after_jg_id:"",u_code:"",u_name:"",reason:""},this.dialogAgentMove.sendDialog=!0},jumpDetail:function(e){var a=window.location.href.replace("List","Detail"),t=this.$router.resolve({name:""+a,params:{id:e.ag_id}});window.open(t.location.name+"?id="+t.location.params.id,"_blank")},dialogSave:function(e){var a=this;return n()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.ruleForm.ag_id=a.listId.ag_id,a.ruleForm.type=a.type,e.next=4,a.$axios.send("AGENT_MANAGE_DIMISSION",a.ruleForm);case 4:0===e.sent.status_code&&(a.tableData.map(function(e){e.ag_id===a.listId.ag_id&&(e.ag_status="预离司")}),a.$message({type:"success",message:"操作成功"}),a.dialogSet.sendDialog=!1);case 6:case"end":return e.stop()}},e,a)}))()},handleGetCode:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.formRule.t_code){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,e.$axios.send("ORGANI_MANAGE_SHOWCODE","",{$code:e.formRule.t_code});case 4:0===(t=a.sent).status_code&&(e.formRule.u_agentName=t.result.t_name,e.formRule.u_code=t.result.ag_code,e.formRule.u_name=t.result.t_ag_name);case 6:case"end":return a.stop()}},a,e)}))()},handlePassSave:function(e){var a,t=this;this.formRule.ag_id=this.listId.ag_id,this.$refs[e].validate((a=n()(r.a.mark(function e(a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,t.$axios.send("AGENT_MANAGE_MOVE",t.formRule);case 3:0===e.sent.status_code&&(t.$message({type:"success",message:"操作成功"}),t.dialogAgentMove.sendDialog=!1),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,t)})),function(e){return a.apply(this,arguments)}))},handleSelectTable:function(e,a){e&&(e.selected=!0,this.listId=e,this.isDisabled=!1),a&&(a.selected=!1)},handleCurrentChange:function(e){this.currentPage=e,this.searchData.page=this.currentPage,this.getData()},getLevelManageData:function(){var e=this;return n()(r.a.mark(function a(){var t,s,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_AGENT_LEVEL_LIST");case 2:0===(t=a.sent).status_code&&(s=void 0,l=void 0,t.result.map(function(a){s=a.j_g_name,l=a.j_g_id,e.optionFrom.push({value:l,label:s})}));case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){var e=this;this.getLevelManageData(),i.a.$once("pageValue",function(a){e.searchData.o_id=a.o_id,e.searchData.t_id=a.t_name,e.searchData.ag_status=1,e.getData()}),i.a.$emit("getPageOjb",1)}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"agentList"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{attrs:{model:e.searchData,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"机构选择"}},[t("SelectChoose",{model:{value:e.searchData.o_id,callback:function(a){e.$set(e.searchData,"o_id",a)},expression:"searchData.o_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人职级"}},[t("el-select",{model:{value:e.searchData.jg_id,callback:function(a){e.$set(e.searchData,"jg_id",a)},expression:"searchData.jg_id"}},e._l(e.optionFrom,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}}),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推荐人"}},[t("el-input",{model:{value:e.searchData.ref_id,callback:function(a){e.$set(e.searchData,"ref_id",a)},expression:"searchData.ref_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"入司时间"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.searchData.ag_join_date,callback:function(a){e.$set(e.searchData,"ag_join_date",a)},expression:"searchData.ag_join_date"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"任职状态"}},[t("el-select",{model:{value:e.searchData.ag_status,callback:function(a){e.$set(e.searchData,"ag_status",a)},expression:"searchData.ag_status"}},e._l(e.Dict.PERSON_AGENT_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属组织"}},[t("el-input",{model:{value:e.searchData.t_id,callback:function(a){e.$set(e.searchData,"t_id",a)},expression:"searchData.t_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"直接主管"}},[t("el-input",{model:{value:e.searchData.ag_leader,callback:function(a){e.$set(e.searchData,"ag_leader",a)},expression:"searchData.ag_leader"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"人员代码"}},[t("el-input",{model:{value:e.searchData.ag_code,callback:function(a){e.$set(e.searchData,"ag_code",a)},expression:"searchData.ag_code"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MENAGE_LIST",expression:"'AGENT_MENAGE_LIST'"}],attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_EDIT",expression:"'AGENT_MANAGE_EDIT'"}],attrs:{type:"warning",disabled:e.isDisabled},on:{click:e.jumpEditPage}},[e._v("修改")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_DIMISSION",expression:"'AGENT_MANAGE_DIMISSION'"}],attrs:{type:"danger",disabled:e.isDisabled},on:{click:function(a){return e.handleBack("ruleForm")}}},[e._v("离司申请")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_MOVE",expression:"'AGENT_MANAGE_MOVE'"}],attrs:{type:"primary",disabled:e.isDisabled},on:{click:function(a){return e.handleMove("formRule")}}},[e._v("迁移")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MENAGE_LIST",expression:"'AGENT_MENAGE_LIST'"}],attrs:{type:"info"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"common-padding"},[t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,height:"500",border:"","highlight-current-row":""},on:{"current-change":e.handleSelectTable}},[t("el-table-column",{attrs:{label:"选择",prop:"name",width:"80"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"工号",prop:"ag_job_number"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"姓名"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("HasDetail",{attrs:{href:"#/app/Agent/Detail?id="+a.row.ag_id,marker:"AGENT_MANAGE_DETAIL"}},[e._v(e._s(a.row.ag_name))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"人员代码",prop:"ag_code"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"所属机构",prop:"o_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"所属组织名称",prop:"t_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"职级",prop:"jg_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"推荐人",prop:"ref_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"直接主管",prop:"ag_leader"}}),e._v(" "),t("el-table-column",{attrs:{label:"任职状态",prop:"ag_status"}}),e._v(" "),t("el-table-column",{attrs:{label:"入司日期",prop:"ag_join_date"}})],1)],1),e._v(" "),t("section",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumTotal?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:"429px",height:"375px"},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",staticStyle:{"margin-left":"27px"},attrs:{label:"离司原因"}})],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("el-radio",{attrs:{label:"1"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[e._v("个人原因")])],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("el-radio",{attrs:{label:"2"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[e._v("考核不通过")])],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("el-radio",{attrs:{label:"3"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[e._v("开除")])],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("el-radio",{attrs:{label:"4"},model:{value:e.type,callback:function(a){e.type=a},expression:"type"}},[e._v("其他")]),e._v(" "),e.isShowInput?t("el-input",{staticClass:"input-width input-marginleft",attrs:{maxlength:"20"},model:{value:e.ruleForm.reason,callback:function(a){e.$set(e.ruleForm,"reason",a)},expression:"ruleForm.reason"}}):e._e()],1)],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dialogSave("ruleForm")}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialogSet.sendDialog=!1}}},[e._v("取 消")])],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogAgentMove.title,isshow:e.dialogAgentMove.sendDialog,width:"528px",height:"671px"},on:{"update:isshow":function(a){return e.$set(e.dialogAgentMove,"sendDialog",a)}}},[t("section",{staticClass:"dialog-agentmove"},[t("el-form",{ref:"formRule",attrs:{model:e.formRule,rules:e.Rule.AGENT_MOVE,"label-width":"190px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁入组织代码",prop:"t_code"}},[t("el-input",{on:{blur:e.handleGetCode},model:{value:e.formRule.t_code,callback:function(a){e.$set(e.formRule,"t_code",a)},expression:"formRule.t_code"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁入后职级",prop:"after_jg_id"}},[t("el-select",{model:{value:e.formRule.after_jg_id,callback:function(a){e.$set(e.formRule,"after_jg_id",a)},expression:"formRule.after_jg_id"}},e._l(e.optionFrom,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁入组织名称"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formRule.u_agentName,callback:function(a){e.$set(e.formRule,"u_agentName",a)},expression:"formRule.u_agentName"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁入组织主管代码"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formRule.u_code,callback:function(a){e.$set(e.formRule,"u_code",a)},expression:"formRule.u_code"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁入组织主管名称"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formRule.u_name,callback:function(a){e.$set(e.formRule,"u_name",a)},expression:"formRule.u_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"迁移原因",prop:"reason"}},[t("el-input",{staticClass:"input-marginmove textareainput",attrs:{maxlength:"50",type:"textarea"},model:{value:e.formRule.reason,callback:function(a){e.$set(e.formRule,"reason",a)},expression:"formRule.reason"}})],1)],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.handlePassSave("formRule")}}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialogAgentMove.sendDialog=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var p=t("VU/8")(m,d,!1,function(e){t("1NQC")},null,null);a.default=p.exports},B5lD:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("M6Pq"),i=t("gHwQ"),c={mixins:[o.a],components:{BaseDialog:i.a},data:function(){return{ruleForm:{mv_audit_remark:""},isShowBtn:!0,dialogSet:{title:"审批",sendDialog:!1},searchData:{ag_job_number:"",ag_name:"",mv_status:"",created_at_start:"",created_at_end:"",page:1},isDisabled:!0,listId:{},searchTime:[],currentPage:1,sumTotal:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]},tableData:[]}},methods:{getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.isDisabled=!0,e.searchTime instanceof Array&&e.searchTime.length>0?(e.searchData.created_at_start=e.searchTime[0],e.searchData.created_at_end=e.searchTime[1]):(e.searchData.created_at_start="",e.searchData.created_at_end=""),a.next=5,e.$axios.send("AGENT_MANAGE_LIST",e.searchData);case 5:0===(t=a.sent).status_code&&(e.tableData=t.result.data,e.sumTotal=t.result.total);case 7:case"end":return a.stop()}},a,e)}))()},handleSearch:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.currentPage=1,e.searchData.page=1,e.getData();case 3:case"end":return a.stop()}},a,e)}))()},handleEdit:function(){if(this.ruleForm.mv_audit_remark=this.listId.mv_audit_remark||"","审批通过"===this.listId.mv_status||"审批驳回"===this.listId.mv_status){var e=this.listId.mv_status;this.dialogSet.sendDialog=!1,this.$message({type:"error",message:e+"不能再审批"})}else this.dialogSet.sendDialog=!0},handleReset:function(){this.searchData={ag_job_number:"",ag_name:"",mv_status:"",created_at_start:"",created_at_end:"",page:1},this.searchTime=[]},dialogSave:function(e){var a=this;return n()(r.a.mark(function t(){var s,l,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.ruleForm.mv_status=e,s=a.listId.mv_id,t.next=4,a.$axios.send("AGENT_MANAGE_MIGRATION",a.ruleForm,{$mv_id:s});case 4:l=t.sent,0===Number(l.status_code)&&(n=l.message,a.tableData.map(function(t){a.listId.ag_id===t.ag_id&&(t.mv_audit_remark=a.ruleForm.mv_audit_remark,1===Number(e)?t.mv_status="审批通过":t.mv_status="审核驳回")}),a.getData(),a.$message({type:"success",message:""+n}),a.dialogSet.sendDialog=!1);case 6:case"end":return t.stop()}},t,a)}))()},handleCurrentChange:function(e){this.currentPage=e,this.searchData.page=this.currentPage,this.getData()},handleSelectTable:function(e,a){e&&(e.selected=!0,this.listId=e,this.isDisabled=!1),a&&(a.selected=!1)}}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"migateApproval"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{attrs:{model:e.searchData,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"审批状态"}},[t("el-select",{model:{value:e.searchData.mv_status,callback:function(a){e.$set(e.searchData,"mv_status",a)},expression:"searchData.mv_status"}},e._l(e.Dict.PERSON_ENTRY_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}}),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(a){e.searchTime=a},expression:"searchTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_LIST",expression:"'AGENT_MANAGE_LIST'"}],attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_MIGRATION",expression:"'AGENT_MANAGE_MIGRATION'"}],attrs:{type:"warning",disabled:e.isDisabled},on:{click:e.handleEdit}},[e._v("审批")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_LIST",expression:"'AGENT_MANAGE_LIST'"}],attrs:{type:"info"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"common-padding"},[t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleSelectTable}},[t("el-table-column",{attrs:{label:"选择",prop:"name",width:"90",fixed:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"工号",prop:"ag_job_number"}}),e._v(" "),t("el-table-column",{attrs:{label:"姓名",prop:"ag_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"人员代码",prop:"ag_code"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁出机构",prop:"pre_o_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁出组织",prop:"pre_t_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁出前职级",prop:"pre_jg_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁入机构",prop:"after_o_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁入组织",prop:"after_t_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"迁入后职级",prop:"after_jg_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"申请时间",prop:"created_at"}}),e._v(" "),t("el-table-column",{attrs:{label:"申请人",prop:"create_u_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批状态",prop:"mv_status"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批时间",prop:"audit_time"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批人",prop:"audit_u_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"审批人机构",prop:"audit_o_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批备注",prop:"mv_audit_remark"}})],1)],1),e._v(" "),t("section",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumTotal?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:"670px",height:"auto"},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"47px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("待审批员工信息")])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("姓名："+e._s(e.listId.ag_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("工号："+e._s(e.listId.ag_job_number))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁出机构："+e._s(e.listId.pre_o_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁出组织："+e._s(e.listId.pre_t_name))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁入机构："+e._s(e.listId.after_o_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁入组织："+e._s(e.listId.after_t_name))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁出前职级："+e._s(e.listId.pre_jg_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("迁出后职级："+e._s(e.listId.after_jg_name))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("申请人："+e._s(e.listId.create_u_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("申请时间："+e._s(e.listId.created_at))])])],1),e._v(" "),t("el-col",{attrs:{span:24,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",{staticStyle:{float:"left"}},[e._v("审批备注：")]),e._v(" "),t("el-input",{staticClass:"textarea-input",attrs:{type:"textarea",maxlength:20},model:{value:e.ruleForm.mv_audit_remark,callback:function(a){e.$set(e.ruleForm,"mv_audit_remark",a)},expression:"ruleForm.mv_audit_remark"}})],1)],1)],1)],1)],1),e._v(" "),e.isShowBtn?t("section",{staticClass:"footerDia",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:function(a){return e.dialogSave("1")}}},[e._v("审批通过")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.dialogSave("2")}}},[e._v("审批不通过")])],1):e._e()])],1)},staticRenderFns:[]};var _=t("VU/8")(c,u,!1,function(e){t("N9PY")},null,null);a.default=_.exports},FqL5:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("Z1YF"),i=t("csDp"),c=t("/Heu"),u={props:["value","placeholder","isShowNull","disabled"],data:function(){return{myValue:"",list:[]}},created:function(){this.myValue=this.value||"",this.init()},methods:{init:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getData();case 2:case"end":return a.stop()}},a,e)}))()},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_NATION_LIST");case 2:(t=a.sent)&&0===t.status_code&&(e.list=t.result);case 4:case"end":return a.stop()}},a,e)}))()},change:function(){this.$emit("input",this.myValue)}},watch:{value:function(e){this.myValue=e}}},_={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-select",{staticClass:"w100",attrs:{placeholder:e.placeholder,clearable:"",disabled:e.disabled},on:{change:e.change},model:{value:e.myValue,callback:function(a){e.myValue=a},expression:"myValue"}},[e.isShowNull?t("el-option",{attrs:{label:"请选择",value:""}}):e._e(),e._v(" "),e._l(e.list,function(e){return t("el-option",{key:e.c_id,attrs:{value:e.code,label:e.name}})})],2)],1)},staticRenderFns:[]},m=t("VU/8")(u,_,!1,null,null,null).exports,d=t("HJFN"),p={props:["value","placeholder","id","disabled"],data:function(){return{options:[],myValue:"",searchData:{o_id:"",t_name:"",t_code:"",t_status:"",t_grade:"",ag_name:"",t_pname:""}}},watch:{value:function(e){var a=this;setTimeout(function(){a.myValue=e},0)},id:function(e){var a=this.$route.params.id,t=this.$route.params.name;this.searchData.o_id=e,e&&this.getReqData(),0!==Number(a)&&"待入司"!==t||(this.myValue="")}},computed:{marker:function(){if(!this.id||this.disabled)return!0}},methods:{change:function(e){this.$emit("input",this.myValue)},getReqData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("TEAM_MANAGE_LIST",e.searchData);case 2:0===(t=a.sent).status_code&&(e.options=t.result);case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.myValue=this.value||""}},f={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-select",{staticClass:"input-width",attrs:{placeholder:e.placeholder,disabled:e.marker},on:{change:e.change},model:{value:e.myValue,callback:function(a){e.myValue=a},expression:"myValue"}},e._l(e.options,function(e){return t("el-option",{key:e.t_id,attrs:{label:e.t_name,value:e.t_id}})}),1)],1)},staticRenderFns:[]},v=t("VU/8")(p,f,!1,null,null,null).exports,g=t("laOz"),b=t("4U5d"),h={components:{BaseCollapseCard:i.a,SelectBank:c.a,SelectNation:m,SelectOrganization:d.a,SelectOrganList:v,SelectJobGrade:g.a},data:function(){return{baseUrl:"",optionsData:[],isSwitch:!1,loading:!1,name:"",formData:{ref_name:"",ag_name:"",ag_id_type:"",ag_sex:"",ag_id_number:"",ag_birthday:"",ag_nation:"",ag_education:"",ag_married:"",ag_native:"",ag_phone:"",ag_address:"",ag_email:"",ag_job_number:"",ag_contract_number:"",o_id:"",t_id:"",jg_id:"",ag_join_date:"",ref_id:"",ref_job_number:"",leader:"",ag_id:"",ag_leader:"",ag_status:"",ag_assess_time:"",ag_director:"",initial_jg_id:"",ag_rejoin:"",ag_branch:"",ag_remark:"",ag_bank_account:"",ag_bank:"",ag_license_number:"",ag_license_date:"",ag_contact_name:"",ag_contact_phone:""},id:""}},computed:{tid:function(){return this.formData.t_id},oid:function(){return this.formData.o_id},disabled:function(){if(this.formData.t_id&&this.formData.o_id)return!1},isDisabled:function(){if(this.name&&"待入司"!==this.name)return!0}},methods:{handleGenderYears:function(e){var a=o.a.getPersonByIdCardNum(e.target.value);a?(this.formData.ag_birthday=a.birthday,this.formData.ag_sex=a.sex):(this.formData.ag_birthday="",this.formData.ag_sex=null)},handleBlur:function(e){var a=this;return n()(r.a.mark(function t(){var s,l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s=e.target.value)){t.next=8;break}return t.next=4,a.$axios.send("TEAM_MANAGE_COMPETENT_SEARCH","",{$jobnum:s});case 4:0===(l=t.sent).status_code?(a.formData.ref_name=l.result.ag_name,a.formData.ref_id=l.result.ag_id):(a.formData.ref_job_number="",a.formData.ref_name="",a.formData.ref_id=""),t.next=11;break;case 8:a.formData.ref_job_number="",a.formData.ref_name="",a.formData.ref_id="";case 11:case"end":return t.stop()}},t,a)}))()},remoteData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_AGENTBY_NAME",{t_id:e.formData.t_id,o_id:e.formData.o_id});case 2:t=a.sent,e.optionsData=t.result;case 4:case"end":return a.stop()}},a,e)}))()},idTypeChange:function(e,a){Array.isArray(a)&&(11===e?a[1]={validator:b.a.idCard,message:"身份证格式不正确",trigger:"blur"}:a.splice(1,1))},save:function(e){var a=this;return n()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.formData.ag_leader=a.formData.ag_id,a.$refs[e].validate(function(){var e=n()(r.a.mark(function e(t){var s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if("0"!==a.id){e.next=8;break}return e.next=4,a.$axios.send("AGENT_MANAGE_ADD",a.formData);case 4:(s=e.sent)&&0===s.status_code&&(a.$router.push({name:"代理人管理"}),a.$message.success("添加成功")),e.next=12;break;case 8:return e.next=10,a.$axios.send("AGENT_MANAGE_EDIT",a.formData,{ag_id:a.id});case 10:(l=e.sent)&&0===l.status_code&&(a.$router.push({name:"代理人管理"}),a.$message.success("修改成功"));case 12:e.next=15;break;case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,a)}));return function(a){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t,a)}))()},init:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.id=e.$route.params.id,e.name=e.$route.params.name,"0"===e.id){a.next=8;break}return a.next=5,e.getDetail();case 5:e.remoteData(),a.next=12;break;case 8:e.remoteData(),t=e.$moment().format("YYYY-MM-DD"),e.formData.ag_join_date=t,e.formData.ag_status=0;case 12:case"end":return a.stop()}},a,e)}))()},getDetail:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("AGENT_MANAGE_DETAIL","",{$ag_id:e.id});case 2:(t=a.sent)&&0===t.status_code&&(e.formData.ref_name=t.result.ref_name,e.formData.ref_id=t.result.ref_id,e.formData=t.result,"0000"===t.result.ag_assess_time.substring(0,4)&&(e.formData.ag_assess_time=""),"0000"===t.result.ag_license_date.substring(0,4)&&(e.formData.ag_license_date=""),"0000"===t.result.ag_join_date.substring(0,4)&&(e.formData.ag_join_date=""),e.formData.ag_nation=Number(t.result.ag_nation),e.formData.ag_bank=Number(t.result.ag_bank),e.formData.t_id=t.result.t_id);case 4:case"end":return a.stop()}},a,e)}))()},upload:function(e){var a=this;return n()(r.a.mark(function t(){var s,l,n,i,c;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,s=e.file,l="/agent/storeMore",(n=new FormData).append("file",s),n.append("action_type",a.actionType),i={headers:{"Content-Type":"multipart/form-data"},responseType:"blob"},t.next=9,a.$axios.post(l,n,i);case 9:(c=t.sent)&&0===c.status_code?(a.loading=!1,a.$message.success("导入成功")):o.a.downloadFile(c,"错误数据.xlsx");case 11:case"end":return t.stop()}},t,a)}))()}},mounted:function(){this.baseUrl=window.resourceBaseUrl},created:function(){this.init()}},D={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("section",{staticClass:"header-title"},[e._v(e._s("0"==e.id?"代理人录入":"代理人修改")+"\n\n    "),"0"===e.id?t("span",{staticClass:"fr"},[t("el-upload",{staticClass:"import-btn",attrs:{action:"upload","http-request":e.upload,"show-file-list":!1,accept:".xls, .xlsx"}},[t("span",[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_IMPORT",expression:"'AGENT_MANAGE_IMPORT'"}],attrs:{type:"primary",size:"small"}},[e._v("批量导入")])],1)])],1):e._e(),e._v(" "),"0"===e.id?t("span",{staticClass:"fr"},[t("a",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_EXPORT",expression:"'AGENT_MANAGE_EXPORT'"}],staticClass:"el-button el-button--primary el-button--small download-btn",attrs:{href:e.baseUrl+"template/代理人导入数据模板.xlsx",download:"代理人导入数据模板.xlsx",type:"primary",size:"small"}},[e._v("导入模板下载")])]):e._e()]),e._v(" "),t("el-form",{ref:"formData",attrs:{model:e.formData,"label-width":"120px",rules:e.Rule.AGENT_EDIT}},[t("div",{staticClass:"entry-boder"},[t("base-collapse-card",{attrs:{title:"基本信息"}},[t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名",prop:"ag_name"}},[t("el-input",{attrs:{maxlength:10,disabled:e.isDisabled},model:{value:e.formData.ag_name,callback:function(a){e.$set(e.formData,"ag_name",a)},expression:"formData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"证件类型",prop:"ag_id_type"}},[t("el-select",{attrs:{disabled:e.isDisabled},on:{change:function(a){return e.idTypeChange(e.formData.ag_id_type,e.Rule.AGENT_EDIT.ag_id_number)}},model:{value:e.formData.ag_id_type,callback:function(a){e.$set(e.formData,"ag_id_type",a)},expression:"formData.ag_id_type"}},e._l(e.Dict.CARD_TYPE,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"证件号码",prop:"ag_id_number"}},[t("el-input",{attrs:{maxlength:20,disabled:e.isDisabled},on:{blur:e.handleGenderYears},model:{value:e.formData.ag_id_number,callback:function(a){e.$set(e.formData,"ag_id_number",a)},expression:"formData.ag_id_number"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"性别",prop:"ag_sex"}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:e.formData.ag_sex,callback:function(a){e.$set(e.formData,"ag_sex",a)},expression:"formData.ag_sex"}},e._l(e.Dict.GENDER,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"出生日期",prop:"ag_birthday"}},[t("el-date-picker",{attrs:{disabled:e.isDisabled,"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.formData.ag_birthday,callback:function(a){e.$set(e.formData,"ag_birthday",a)},expression:"formData.ag_birthday"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"民族",prop:"ag_nation"}},[t("select-nation",{attrs:{disabled:e.isDisabled},model:{value:e.formData.ag_nation,callback:function(a){e.$set(e.formData,"ag_nation",a)},expression:"formData.ag_nation"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"文化程度",prop:"ag_education"}},[t("el-select",{model:{value:e.formData.ag_education,callback:function(a){e.$set(e.formData,"ag_education",a)},expression:"formData.ag_education"}},e._l(e.Dict.AG_EDUCATION,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"婚姻状态",prop:"ag_married"}},[t("el-select",{model:{value:e.formData.ag_married,callback:function(a){e.$set(e.formData,"ag_married",a)},expression:"formData.ag_married"}},e._l(e.Dict.AG_MARRIED,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"籍贯",prop:"ag_native"}},[t("el-input",{attrs:{maxlength:50},model:{value:e.formData.ag_native,callback:function(a){e.$set(e.formData,"ag_native",a)},expression:"formData.ag_native"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"手机号",prop:"ag_phone"}},[t("el-input",{model:{value:e.formData.ag_phone,callback:function(a){e.$set(e.formData,"ag_phone",a)},expression:"formData.ag_phone"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"详细地址",prop:"ag_address"}},[t("el-input",{attrs:{maxlength:50},model:{value:e.formData.ag_address,callback:function(a){e.$set(e.formData,"ag_address",a)},expression:"formData.ag_address"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"邮箱",prop:"ag_email"}},[t("el-input",{attrs:{type:"email"},model:{value:e.formData.ag_email,callback:function(a){e.$set(e.formData,"ag_email",a)},expression:"formData.ag_email"}})],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"entry-boder"},[t("base-collapse-card",{attrs:{title:"公司信息"}},[t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号",prop:"ag_job_number"}},[t("el-input",{attrs:{maxlength:30,disabled:e.isDisabled},model:{value:e.formData.ag_job_number,callback:function(a){e.$set(e.formData,"ag_job_number",a)},expression:"formData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"合同号码",prop:"ag_contract_number"}},[t("el-input",{attrs:{maxlength:30,disabled:e.isDisabled},model:{value:e.formData.ag_contract_number,callback:function(a){e.$set(e.formData,"ag_contract_number",a)},expression:"formData.ag_contract_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属机构",prop:"o_id"}},[t("SelectOrganization",{attrs:{disabled:e.isDisabled},model:{value:e.formData.o_id,callback:function(a){e.$set(e.formData,"o_id",a)},expression:"formData.o_id"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属组织",prop:"t_id"}},[t("SelectOrganList",{attrs:{id:e.formData.o_id,disabled:e.isDisabled},model:{value:e.formData.t_id,callback:function(a){e.$set(e.formData,"t_id",a)},expression:"formData.t_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"入司时间",prop:"ag_join_date"}},[t("el-date-picker",{attrs:{disabled:e.isDisabled,"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.formData.ag_join_date,callback:function(a){e.$set(e.formData,"ag_join_date",a)},expression:"formData.ag_join_date"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"在职状态",prop:"ag_status"}},[t("el-select",{attrs:{disabled:""},model:{value:e.formData.ag_status,callback:function(a){e.$set(e.formData,"ag_status",a)},expression:"formData.ag_status"}},e._l(e.Dict.AG_STATUS,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"当前职级",prop:"jg_id"}},[t("select-job-grade",{attrs:{disabled:e.isDisabled},model:{value:e.formData.jg_id,callback:function(a){e.$set(e.formData,"jg_id",a)},expression:"formData.jg_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推荐人工号",prop:"ref_job_number"}},[t("el-input",{attrs:{clearable:""},on:{blur:e.handleBlur},model:{value:e.formData.ref_job_number,callback:function(a){e.$set(e.formData,"ref_job_number",a)},expression:"formData.ref_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推荐人"}},[t("el-input",{attrs:{disabled:""},model:{value:e.formData.ref_name,callback:function(a){e.$set(e.formData,"ref_name",a)},expression:"formData.ref_name"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"直接主管",prop:"ag_leader"}},[t("el-select",{attrs:{filterable:"",clearable:"",disabled:e.disabled},model:{value:e.formData.ag_id,callback:function(a){e.$set(e.formData,"ag_id",a)},expression:"formData.ag_id"}},e._l(e.optionsData,function(a){return t("el-option",{key:a.ag_id,attrs:{label:a.ag_name,value:a.ag_id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(a.ag_name))]),e._v(" "),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(a.ag_job_number))])])}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核时间",prop:"ag_assess_time"}},[t("el-date-picker",{attrs:{disabled:e.isDisabled,"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.formData.ag_assess_time,callback:function(a){e.$set(e.formData,"ag_assess_time",a)},expression:"formData.ag_assess_time"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"行政主管",prop:"ag_director"}},[t("el-input",{attrs:{maxlength:10,disabled:e.isDisabled},model:{value:e.formData.ag_director,callback:function(a){e.$set(e.formData,"ag_director",a)},expression:"formData.ag_director"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"入司职级",prop:"initial_jg_id"}},[t("select-job-grade",{attrs:{disabled:e.isDisabled},model:{value:e.formData.initial_jg_id,callback:function(a){e.$set(e.formData,"initial_jg_id",a)},expression:"formData.initial_jg_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"二次入司",prop:"ag_rejoin"}},[t("el-select",{attrs:{disabled:e.isDisabled},model:{value:e.formData.ag_rejoin,callback:function(a){e.$set(e.formData,"ag_rejoin",a)},expression:"formData.ag_rejoin"}},e._l(e.Dict.AG_REJOIN,function(e){return t("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"分部",prop:"ag_branch"}},[t("el-input",{attrs:{maxlength:20,disabled:e.isDisabled},model:{value:e.formData.ag_branch,callback:function(a){e.$set(e.formData,"ag_branch",a)},expression:"formData.ag_branch"}})],1)],1)],1),e._v(" "),t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"备注",prop:"ag_remark"}},[t("el-input",{attrs:{maxlength:50,disabled:e.isDisabled},model:{value:e.formData.ag_remark,callback:function(a){e.$set(e.formData,"ag_remark",a)},expression:"formData.ag_remark"}})],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"entry-boder"},[t("base-collapse-card",{attrs:{title:"其他信息"}},[t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"银行账号",prop:"ag_bank_account"}},[t("el-input",{attrs:{maxlength:25},model:{value:e.formData.ag_bank_account,callback:function(a){e.$set(e.formData,"ag_bank_account",a)},expression:"formData.ag_bank_account"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开户行",prop:"ag_bank"}},[t("select-bank",{model:{value:e.formData.ag_bank,callback:function(a){e.$set(e.formData,"ag_bank",a)},expression:"formData.ag_bank"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"执业证号",prop:"ag_license_number"}},[t("el-input",{attrs:{maxlength:30},model:{value:e.formData.ag_license_number,callback:function(a){e.$set(e.formData,"ag_license_number",a)},expression:"formData.ag_license_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"执业证有效期",prop:"ag_license_date"}},[t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date"},model:{value:e.formData.ag_license_date,callback:function(a){e.$set(e.formData,"ag_license_date",a)},expression:"formData.ag_license_date"}})],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"entry-boder"},[t("base-collapse-card",{attrs:{title:"紧急联系人"}},[t("el-row",{staticClass:"pr20"},[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名",prop:"ag_contact_name"}},[t("el-input",{attrs:{maxlength:10},model:{value:e.formData.ag_contact_name,callback:function(a){e.$set(e.formData,"ag_contact_name",a)},expression:"formData.ag_contact_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"手机号",prop:"ag_contact_phone"}},[t("el-input",{model:{value:e.formData.ag_contact_phone,callback:function(a){e.$set(e.formData,"ag_contact_phone",a)},expression:"formData.ag_contact_phone"}})],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"tc common-btn"},[e.id?t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_EDIT",expression:"'AGENT_MANAGE_EDIT'"}],attrs:{type:"success"},on:{click:function(a){return e.save("formData")}}},[e._v("保存")]):t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_ADD",expression:"'AGENT_MANAGE_ADD'"}],attrs:{type:"success"},on:{click:function(a){return e.save("formData")}}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var x=t("VU/8")(h,D,!1,function(e){t("O5gt")},"data-v-08edb1e1",null);a.default=x.exports},HJFN:function(e,a,t){"use strict";var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o={props:["value","placeholder","isShowNull","disabled"],data:function(){return{myValue:"",list:[]}},created:function(){this.myValue=this.value||"",this.init()},methods:{init:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.getData();case 2:case"end":return a.stop()}},a,e)}))()},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_ORGANI_LIST",{o_name:"",o_g_id:"",o_status:1});case 2:(t=a.sent)&&0===t.status_code&&(e.list=t.result);case 4:case"end":return a.stop()}},a,e)}))()},change:function(){this.$emit("input",this.myValue)}},watch:{value:function(e){this.myValue=e}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-select",{staticClass:"w100",attrs:{placeholder:e.placeholder,clearable:"",disabled:e.disabled},on:{change:e.change},model:{value:e.myValue,callback:function(a){e.myValue=a},expression:"myValue"}},[e.isShowNull?t("el-option",{attrs:{label:"请选择",value:""}}):e._e(),e._v(" "),e._l(e.list,function(e){return t("el-option",{key:e.o_id,attrs:{value:e.o_id,label:e.o_name}})})],2)],1)},staticRenderFns:[]},c=t("VU/8")(o,i,!1,null,null,null);a.a=c.exports},JL4V:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("M6Pq"),i=t("gHwQ"),c={mixins:[o.a],components:{BaseDialog:i.a},data:function(){return{isShowBtn:!0,ruleForm:{st_status_type:1,audit_remark:""},dialogSet:{title:"审批",sendDialog:!1},searchTime:[],listId:{},currentPage:1,isDisabled:!0,sumTotal:"",options:[],stReason:[{value:"1",label:"个人原因"},{value:"2",label:"考核不通过"},{value:"3",label:"开除"},{value:"4",label:"其他"}],searchData:{st_status_type:1,created_at_start:"",created_at_end:"",ag_name:"",ag_job_number:"",st_status:"",t_id:"",page:1},searchParame:{o_id:"",t_name:"",t_code:"",t_status:"",t_grade:"",ag_name:"",t_pname:""},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]},tableData:[]}},methods:{handleReset:function(){this.searchData={st_status_type:1,created_at_start:"",created_at_end:"",ag_name:"",ag_job_number:"",st_status:"",t_id:""},this.searchTime=[]},getReason:function(e){var a=JSON.parse(e),t=void 0;return a.reason?a.reason:(this.stReason.map(function(e){Number(a.type)===Number(e.value)&&(t=e.label)}),t)},handleEdit:function(){if(this.ruleForm.audit_remark=this.listId.audit_remark,"审批通过"===this.listId.st_status||"审批驳回"===this.listId.st_status){var e=this.listId.st_status;this.dialogSet.sendDialog=!1,this.$message({type:"error",message:e+"不能再审批"})}else this.dialogSet.sendDialog=!0},dialogSave:function(e){var a=this;return n()(r.a.mark(function t(){var s,l,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.ruleForm.st_status=e,s=a.listId.st_id,t.next=4,a.$axios.send("AGENT_MANAGE_ENTRY",a.ruleForm,{id:s});case 4:l=t.sent,0===Number(l.status_code)&&(n=l.message,a.tableData.map(function(t){a.listId.st_id===t.st_id&&(t.audit_remark=a.ruleForm.audit_remark,1===Number(e)?t.st_status="审批通过":t.st_status="审核驳回")}),a.getData(),a.$message({type:"success",message:""+n}),a.dialogSet.sendDialog=!1);case 6:case"end":return t.stop()}},t,a)}))()},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.isDisabled=!0,e.searchTime instanceof Array&&e.searchTime.length>0?(e.searchData.created_at_start=e.searchTime[0],e.searchData.created_at_end=e.searchTime[1]):(e.searchData.created_at_start="",e.searchData.created_at_end=""),a.next=5,e.$axios.send("AGENT_BATCH_RESIGN_LIST",e.searchData);case 5:0===(t=a.sent).status_code&&(e.tableData=t.result.data,e.sumTotal=t.result.total);case 7:case"end":return a.stop()}},a,e)}))()},handleSearch:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.currentPage=1,e.searchData.page=1,e.getData();case 3:case"end":return a.stop()}},a,e)}))()},handleSelectTable:function(e,a){e&&(e.selected=!0,this.listId=e,this.isDisabled=!1),a&&(a.selected=!1)},handleCurrentChange:function(e){this.currentPage=e,this.searchData.page=this.currentPage,this.getData()},getOrganizaData:function(){var e=this;return n()(r.a.mark(function a(){var t,s,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("TEAM_MANAGE_LIST",e.searchParame);case 2:0===(t=a.sent).status_code&&(s=void 0,l=void 0,t.result.map(function(a){s=a.t_name,l=a.t_id,e.options.push({value:l,label:s})}));case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getOrganizaData()}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"resignApproval"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{attrs:{model:e.searchData,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"审批状态"}},[t("el-select",{model:{value:e.searchData.st_status,callback:function(a){e.$set(e.searchData,"st_status",a)},expression:"searchData.st_status"}},e._l(e.Dict.PERSON_ENTRY_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}}),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属组织"}},[t("el-select",{model:{value:e.searchData.t_id,callback:function(a){e.$set(e.searchData,"t_id",a)},expression:"searchData.t_id"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(a){e.searchTime=a},expression:"searchTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_BATCH_RESIGN_LIST",expression:"'AGENT_BATCH_RESIGN_LIST'"}],attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_ENTRY",expression:"'AGENT_MANAGE_ENTRY'"}],attrs:{type:"warning",disabled:e.isDisabled},on:{click:e.handleEdit}},[e._v("审批")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_BATCH_RESIGN_LIST",expression:"'AGENT_BATCH_RESIGN_LIST'"}],attrs:{type:"info"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"common-padding"},[t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleSelectTable}},[t("el-table-column",{attrs:{label:"选择",prop:"name",width:"90",fixed:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"工号",prop:"ag_job_number"}}),e._v(" "),t("el-table-column",{attrs:{label:"姓名",prop:"ag_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"人员代码",prop:"ag_code"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"所属机构",prop:"o_name"}}),e._v(" "),t("el-table-column",{attrs:{"min-width":"120",label:"所属组织名称",prop:"t_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"职级",prop:"jg_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"推荐人",prop:"ref_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"主管姓名",prop:"ag_leader"}}),e._v(" "),t("el-table-column",{attrs:{label:"申请时间",prop:"created_at"}}),e._v(" "),t("el-table-column",{attrs:{label:"离司原因",prop:"st_reason"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e.getReason(a.row.st_reason)))])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"审批状态",prop:"st_status"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批人",prop:"audit_u_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批时间",prop:"audit_time"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批备注",prop:"audit_remark"}})],1)],1),e._v(" "),t("section",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumTotal?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:"541px",height:"auto"},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"47px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("待审批员工信息")])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("姓名："+e._s(e.listId.ag_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("工号："+e._s(e.listId.ag_job_number))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("职级："+e._s(e.listId.jg_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("所属组织："+e._s(e.listId.t_name))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("推荐人："+e._s(e.listId.ref_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("申请时间："+e._s(e.listId.created_at))])])],1),e._v(" "),t("el-col",{attrs:{span:24,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",{staticStyle:{float:"left"}},[e._v("审批备注：")]),e._v(" "),t("el-input",{staticClass:"textarea-input",attrs:{type:"textarea",maxlength:20},model:{value:e.ruleForm.audit_remark,callback:function(a){e.$set(e.ruleForm,"audit_remark",a)},expression:"ruleForm.audit_remark"}})],1)],1)],1)],1)],1),e._v(" "),e.isShowBtn?t("section",{staticClass:"footerName",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dialogSave("1")}}},[e._v("审批通过")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.dialogSave("2")}}},[e._v("审批不通过")])],1):e._e()])],1)},staticRenderFns:[]};var _=t("VU/8")(c,u,!1,function(e){t("Vs2V")},null,null);a.default=_.exports},K4R9:function(e,a,t){t("NA/8"),e.exports=t("FeBl").Number.isNaN},M6Pq:function(e,a,t){"use strict";a.a={activated:function(){this.tableData.length>0&&this.getData()}}},MICi:function(e,a,t){e.exports={default:t("K4R9"),__esModule:!0}},N9PY:function(e,a){},"NA/8":function(e,a,t){var s=t("kM2E");s(s.S,"Number",{isNaN:function(e){return e!=e}})},O5gt:function(e,a){},Vs2V:function(e,a){},csDp:function(e,a,t){"use strict";var s={props:{title:{type:String,required:!0}},data:function(){return{activeName:"1"}}},r={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-collapse-item",{staticClass:"customer-title",attrs:{name:"1"}},[t("template",{slot:"title"},[e.title?t("span",{staticClass:"title"},[e._v(e._s(e.title))]):e._e(),e._v(" "),t("div",{staticClass:"btn"},[e._t("btn")],2)]),e._v(" "),t("div",{staticClass:"container-body"},[e._t("default")],2)],2)],1)],1)},staticRenderFns:[]};var l=t("VU/8")(s,r,!1,function(e){t("0gVd")},"data-v-64826c18",null);a.a=l.exports},gY1O:function(e,a){},oynR:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o={data:function(){return{mid:Number(this.$router.currentRoute.query.id),listData:{}}},methods:{handleSave:function(){window.close()},getRequireData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("AGENT_MANAGE_DETAIL","",{$ag_id:e.mid});case 2:0===(t=a.sent).status_code&&(e.listData=t.result);case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getRequireData()}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"agentDetail"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"common-padding"},[t("el-form",[t("div",{staticClass:"commont-borderbox"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"common-subTitle",attrs:{label:"个人信息"}})],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名："}},[t("span",[e._v(e._s(e.listData.ag_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"证件类型："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_id_type,"CARD_TYPE")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"证件号码："}},[t("span",[e._v(e._s(e.listData.ag_id_number))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"性别："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_sex,"GENDER")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"出生日期："}},[t("span",[e._v(e._s(e.listData.ag_birthday))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"民族："}},[t("span",[e._v(e._s(e.listData.ag_nation_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"手机号码："}},[t("span",[e._v(e._s(e.listData.ag_phone))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"婚姻状态："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_married,"AG_MARRIED")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"籍贯："}},[t("span",[e._v(e._s(e.listData.ag_native))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"文化程度："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_education,"AG_EDUCATION")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"邮箱："}},[t("span",[e._v(e._s(e.listData.ag_email))])])],1)],1)],1)]),e._v(" "),t("el-form",[t("div",{staticClass:"commont-borderbox"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"common-subTitle",attrs:{label:"公司信息"}})],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号："}},[t("span",[e._v(e._s(e.listData.ag_job_number))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"合同编号："}},[t("span",[e._v(e._s(e.listData.ag_contract_number))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所在机构："}},[t("span",[e._v(e._s(e.listData.o_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属组织："}},[t("span",[e._v(e._s(e.listData.t_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"入司时间："}},[t("span",[e._v(e._s(e.listData.ag_join_date))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"在职状态："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_status,"AG_STATUS")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"当前职级："}},[t("span",[e._v(e._s(e.listData.j_g_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推荐人："}},[t("span",[e._v(e._s(e.listData.ref_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"直接主管："}},[t("span",[e._v(e._s(e.listData.ag_leader_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"推荐人工号："}},[t("span",[e._v(e._s(e.listData.ref_job_number))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核时间："}},[t("span",[e._v(e._s(e.listData.ag_assess_time))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"行政主管："}},[t("span",[e._v(e._s(e.listData.ag_director))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"入司职级："}},[t("span",[e._v(e._s(e.listData.initial_j_g_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"二次入司："}},[t("span",[e._v(e._s(e._f("dict")(e.listData.ag_rejoin,"AG_REJOIN")))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"分部："}},[t("span",[e._v(e._s(e.listData.ag_branch))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"备注："}},[t("span",[e._v(e._s(e.listData.ag_remark))])])],1)],1)],1)]),e._v(" "),t("el-form",[t("div",{staticClass:"commont-borderbox"},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"common-subTitle",attrs:{label:"其他信息"}})],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"银行账号："}},[t("span",[e._v(e._s(e.listData.ag_bank_account))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"开户行："}},[t("span",[e._v(e._s(e.listData.ag_bank_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"执业证号："}},[t("span",[e._v(e._s(e.listData.ag_license_number))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"执业证有效期："}},[t("span",[e._v(e._s(e.listData.ag_license_date))])])],1)],1)],1)]),e._v(" "),t("el-form",[t("div",[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"common-subTitle",attrs:{label:"紧急联系人"}})],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名："}},[t("span",[e._v(e._s(e.listData.ag_contact_name))])])],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"手机号："}},[t("span",[e._v(e._s(e.listData.ag_contact_phone))])])],1)],1)],1)])],1),e._v(" "),t("el-col",{staticClass:"common-btn",attrs:{span:24}},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("关闭")])],1)],1)},staticRenderFns:[]};var c=t("VU/8")(o,i,!1,function(e){t("gY1O")},null,null);a.default=c.exports},qhwk:function(e,a){},uvV0:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o=t("M6Pq"),i=t("gHwQ"),c={mixins:[o.a],components:{BaseDialog:i.a},data:function(){return{isShowBtn:!0,ruleForm:{st_status_type:0,audit_remark:""},dialogSet:{title:"",sendDialog:!1},searchTime:[],listId:[],options:[],isDisabled:!0,multipleSelection:[],flag:Boolean,getWidth:"",getHeight:"",sumTotal:"",currentPage:1,searchData:{st_status_type:0,created_at_start:"",created_at_end:"",ag_name:"",ag_job_number:"",st_status:"",t_id:""},searchParame:{o_id:"",t_name:"",t_code:"",t_status:"",t_grade:"",ag_name:"",t_pname:""},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-6048e5),e.$emit("pick",[t,a])}},{text:"最近一个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-2592e6),e.$emit("pick",[t,a])}},{text:"最近三个月",onClick:function(e){var a=new Date,t=new Date;t.setTime(t.getTime()-7776e6),e.$emit("pick",[t,a])}}]},tableData:[]}},computed:{footClass:function(){return this.flag?"footerSelect":"footer-margin"}},methods:{handleReset:function(){this.searchData={st_status_type:0,created_at_start:"",created_at_end:"",ag_name:"",ag_job_number:"",st_status:"",t_id:""},this.searchTime=[]},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.searchTime instanceof Array&&e.searchTime.length>0?(e.searchData.created_at_start=e.searchTime[0],e.searchData.created_at_end=e.searchTime[1]):(e.searchData.created_at_start="",e.searchData.created_at_end=""),a.next=4,e.$axios.send("AGENT_BATCH_Entry_LIST",e.searchData);case 4:0===(t=a.sent).status_code&&(e.tableData=t.result.data,e.sumTotal=t.result.total);case 6:case"end":return a.stop()}},a,e)}))()},handleSearch:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.currentPage=1,e.searchData.page=1,e.getData();case 3:case"end":return a.stop()}},a,e)}))()},handleSelectionChange:function(e){e.length>0?this.isDisabled=!1:this.isDisabled=!0,this.multipleSelection=e,this.listId=e},handleApproval:function(){var e=[],a=!0;this.multipleSelection.map(function(a){e.push(a.st_status)});for(var t=0;t<e.length;t++)for(var s=t+1;s<e.length;s++)if(e[t]!==e[s]){a=!1;break}if(!a)return this.dialogSet.sendDialog=!1,this.$message({type:"error",message:"审批状态不一致"}),!1;this.multipleSelection.some(function(e){return"审批通过"===e.st_status})?(this.dialogSet.sendDialog=!1,this.$message({type:"error",message:"审批通过不能再审批"})):this.dialogSet.sendDialog=!0,this.multipleSelection.length>=2?(this.dialogSet.title="批量审批",this.getWidth="50%",this.getHeight="auto",this.flag=!1):(this.ruleForm.audit_remark=this.multipleSelection[0].audit_remark,this.dialogSet.title="审批",this.getWidth="50%",this.getHeight="auto",this.flag=!0)},getParames:function(){var e=void 0,a=[];return this.multipleSelection.length>=2?(this.multipleSelection.map(function(e){a.push(e.st_id)}),a):(this.multipleSelection.map(function(a){e=a.st_id}),e)},dialogSave:function(e){var a=this;return n()(r.a.mark(function t(){var s,l,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.ruleForm.st_status=e,s=a.getParames(),l=void 0,!(s instanceof Array)){t.next=10;break}return a.ruleForm.ids=s,t.next=7,a.$axios.send("AGENT_MANAGE_BATCH",a.ruleForm);case 7:l=t.sent,t.next=13;break;case 10:return t.next=12,a.$axios.send("AGENT_MANAGE_ENTRY",a.ruleForm,{id:s});case 12:l=t.sent;case 13:0===Number(l.status_code)&&(n=l.message,a.tableData.map(function(t){a.multipleSelection.map(function(r){r.st_id===t.st_id&&(!s.length>0&&(t.audit_remark=a.ruleForm.audit_remark),1===Number(e)?t.st_status="审核通过":t.st_status="审核驳回")}),a.getData()}),a.$message({type:"success",message:""+n}),a.dialogSet.sendDialog=!1);case 14:case"end":return t.stop()}},t,a)}))()},handleCurrentChange:function(e){this.currentPage=e,this.searchData.page=this.currentPage,this.getData()},getOrganizaData:function(){var e=this;return n()(r.a.mark(function a(){var t,s,l;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("TEAM_MANAGE_LIST",e.searchParame);case 2:0===(t=a.sent).status_code&&(s=void 0,l=void 0,t.result.map(function(a){s=a.t_name,l=a.t_id,e.options.push({value:l,label:s})}));case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getOrganizaData()}},u={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"entryApproval"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{attrs:{model:e.searchData,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"审批状态"}},[t("el-select",{model:{value:e.searchData.st_status,callback:function(a){e.$set(e.searchData,"st_status",a)},expression:"searchData.st_status"}},e._l(e.Dict.PERSON_ENTRY_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}}),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"所属组织"}},[t("el-select",{model:{value:e.searchData.t_id,callback:function(a){e.$set(e.searchData,"t_id",a)},expression:"searchData.t_id"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:16}},[t("el-form-item",{attrs:{label:"申请时间"}},[t("el-date-picker",{attrs:{type:"daterange","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchTime,callback:function(a){e.searchTime=a},expression:"searchTime"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_BATCH_Entry_LIST",expression:"'AGENT_BATCH_Entry_LIST'"}],attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_MANAGE_BATCH",expression:"'AGENT_MANAGE_BATCH'"}],attrs:{type:"warning",disabled:e.isDisabled},on:{click:e.handleApproval}},[e._v("审批")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_BATCH_Entry_LIST",expression:"'AGENT_BATCH_Entry_LIST'"}],attrs:{type:"info"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"common-padding"},[t("el-table",{ref:"multipleTable",staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:"",height:"500"},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{fixed:"",type:"selection",width:"80",label:"全选"}}),e._v(" "),t("el-table-column",{attrs:{label:"工号","min-width":"130",prop:"ag_job_number"}}),e._v(" "),t("el-table-column",{attrs:{label:"姓名","min-width":"100",prop:"ag_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"人员代码","min-width":"100",prop:"ag_code"}}),e._v(" "),t("el-table-column",{attrs:{label:"所属机构","min-width":"120",prop:"o_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"所属组织名称","min-width":"120",prop:"t_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"职级",prop:"jg_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"推荐人",prop:"ref_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"主管姓名",prop:"ag_leader"}}),e._v(" "),t("el-table-column",{attrs:{label:"申请时间",prop:"created_at"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批状态",prop:"st_status"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批人",prop:"audit_u_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批时间",prop:"audit_time"}}),e._v(" "),t("el-table-column",{attrs:{label:"审批备注",prop:"audit_remark"}})],1)],1),e._v(" "),t("section",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumTotal?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:e.getWidth,height:e.getHeight},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[e.flag?t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"47px"}},e._l(e.listId,function(a,s){return t("el-row",{key:s},[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("待审批员工信息")])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("姓名："+e._s(a.ag_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("工号："+e._s(a.ag_job_number))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("职级："+e._s(a.jg_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("所属组织："+e._s(a.t_name))])])],1),e._v(" "),t("el-col",{attrs:{span:9,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("推荐人："+e._s(a.ref_name))])])],1),e._v(" "),t("el-col",{attrs:{span:14}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("申请时间："+e._s(a.created_at))])])],1),e._v(" "),t("el-col",{attrs:{span:24,offset:1}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",{staticStyle:{float:"left"}},[e._v("审批备注：")]),e._v(" "),t("el-input",{staticClass:"textarea-input",attrs:{type:"textarea",maxlength:20},model:{value:e.ruleForm.audit_remark,callback:function(a){e.$set(e.ruleForm,"audit_remark",a)},expression:"ruleForm.audit_remark"}})],1)],1)],1)}),1)],1):t("section",{staticClass:"dialogshow-center",staticStyle:{margin:"0 47px"}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("span",[e._v("共计"+e._s(e.multipleSelection.length)+"名员工入司申请")])])],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"clear-marginbottom",attrs:{label:""}},[t("table",{staticClass:"dialogshow-table",staticStyle:{"border-collapse":"collapse"},attrs:{border:"1",cellspacing:"0"}},[t("tr",[t("th",[e._v("姓名")]),e._v(" "),t("th",[e._v("工号")])]),e._v(" "),e._l(e.multipleSelection,function(a,s){return t("tr",{key:s},[t("td",[e._v(e._s(a.ag_name))]),e._v(" "),t("td",[e._v(e._s(a.ag_job_number))])])})],2)])],1)],1)],1)],1),e._v(" "),e.isShowBtn?t("section",{class:e.footClass,attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dialogSave("1")}}},[e._v("审批通过")]),e._v(" "),t("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.dialogSave("2")}}},[e._v("审批不通过")])],1):e._e()])],1)},staticRenderFns:[]};var _=t("VU/8")(c,u,!1,function(e){t("y6RP")},null,null);a.default=_.exports},w5Vz:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),r=t.n(s),l=t("exGp"),n=t.n(l),o={components:{BaseDialog:t("gHwQ").a},data:function(){return{tableLength:Number,mark:Number,dialogSet:{title:"",sendDialog:!1},searchData:{},levelNum:"",isDisabled:!1,listId:{},currentPage:1,sumtotal:"",objnum:{page:1},ruleForm:{j_g_grade:"",j_g_name:""},rules:{j_g_name:[{required:!0,message:"请填写机构类型",trigger:"blur"}]},tableData:[]}},methods:{handleAdd:function(e){this.$refs[e].resetFields(),this.tableLength=Number(this.levelNum)+1,this.dialogSet.sendDialog=!0,this.dialogSet.title="新增职级",this.mark=1},handleEditor:function(e){this.$refs[e].resetFields(),this.mark=2,this.dialogSet.title="修改职级",this.dialogSet.sendDialog=!0,this.tableLength=this.listId.j_g_grade,this.ruleForm.j_g_name=this.listId.j_g_name},handleDelect:function(){var e=this;return n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("AGENT_LEVEL_DELETE","",{$id:e.listId.j_g_id});case 2:0===a.sent.status_code&&(e.tableData.length-1==0&&(e.objnum.page=e.currentPage-1),e.getData(),e.$message({type:"success",message:"删除成功!"}),e.isDisabled=!1);case 4:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})});case 1:case"end":return a.stop()}},a,e)}))()},dialogSave:function(e){var a,t=this;this.$refs[e].validate((a=n()(r.a.mark(function e(a){var s,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=15;break}if(t.ruleForm.j_g_grade=t.$refs.j_g_gradename.innerHTML,s=void 0,1!==t.mark){e.next=9;break}return e.next=6,t.$axios.send("AGENT_LEVEL_ADD",t.ruleForm);case 6:s=e.sent,e.next=12;break;case 9:return e.next=11,t.$axios.send("AGENT_LEVEL_UPDATE",{j_g_name:t.ruleForm.j_g_name},{$id:t.listId.j_g_id});case 11:s=e.sent;case 12:0===s.status_code&&(l=t,setTimeout(function(){var e=void 0;1===l.mark?(t.getData(),t.isDisabled=!1,e="提交成功"):(t.tableData.map(function(e){e.j_g_id===t.listId.j_g_id&&(e.j_g_name=t.ruleForm.j_g_name)}),e="修改成功"),l.$message({type:"success",message:""+e}),t.dialogSet.sendDialog=!1},500)),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,t)})),function(e){return a.apply(this,arguments)}))},handleCurrentChange:function(e){this.currentPage=e,this.objnum.page=this.currentPage,this.getData()},handleSelectTable:function(e,a){e&&(e.selected=!0,this.listId=e,this.isDisabled=!0),a&&(a.selected=!1)},getNumberMax:function(e){var a=[];e.map(function(e){a.push(e.j_g_grade)}),this.sumtotal>10?this.levelNum=this.sumtotal:this.levelNum=a.sort(function(e,a){return e-a}).reverse()[0]||0},getData:function(){var e=this;return n()(r.a.mark(function a(){var t;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_AGENT_LEVEL_LIST",e.objnum);case 2:0===(t=a.sent).status_code&&(e.tableData=t.result.data,e.sumtotal=t.result.total,e.getNumberMax(e.tableData));case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getData()}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"levelManage"},[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("div",{staticClass:"common-padding"},[t("el-form",{attrs:{model:e.searchData}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_LEVEL_ADD",expression:"'AGENT_LEVEL_ADD'"}],attrs:{type:"primary"},on:{click:function(a){return e.handleAdd("ruleForm")}}},[e._v("新增")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_LEVEL_UPDATE",expression:"'AGENT_LEVEL_UPDATE'"}],attrs:{type:"warning",disabled:!e.isDisabled},on:{click:function(a){return e.handleEditor("ruleForm")}}},[e._v("修改")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"AGENT_LEVEL_DELETE",expression:"'AGENT_LEVEL_DELETE'"}],attrs:{type:"danger",disabled:!e.isDisabled},on:{click:e.handleDelect}},[e._v("删除")])],1)],1)],1)],1)],1),e._v(" "),t("div",{staticClass:"common-padding",staticStyle:{"padding-bottom":"20px"}},[t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"current-change":e.handleSelectTable}},[t("el-table-column",{attrs:{label:"选择",width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{label:"职位等级",prop:"j_g_grade"}}),e._v(" "),t("el-table-column",{attrs:{label:"职级名称",prop:"j_g_name"}})],1),e._v(" "),t("div",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumtotal?t("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumtotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])],1),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:"342px",height:"284px"},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"职级等级"}},[t("span",{ref:"j_g_gradename"},[e._v(e._s(e.tableLength))])])],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:"职级名称",prop:"j_g_name"}},[t("el-input",{staticClass:"input-width",model:{value:e.ruleForm.j_g_name,callback:function(a){e.$set(e.ruleForm,"j_g_name",a)},expression:"ruleForm.j_g_name"}})],1)],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.dialogSave("ruleForm")}}},[e._v("提 交")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialogSet.sendDialog=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var c=t("VU/8")(o,i,!1,function(e){t("qhwk")},null,null);a.default=c.exports},y6RP:function(e,a){}});