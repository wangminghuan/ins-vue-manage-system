webpackJsonp([8],{lFw8:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("Xxa5"),l=t.n(s),n=t("exGp"),r=t.n(n),o=t("HGAp"),i=t("laOz"),c=t("PcmU"),_=t("gHwQ"),u=t("PJh5"),m=t.n(u),p={mixins:[c.a],components:{BaseDialog:_.a,SelectChoose:o.a,SelectJobGrade:i.a},data:function(){return{searchData:{a_e_result:"",a_e_is_protection:"",a_e_time:m()().format("YYYY-MM")},currSelected:null,updateType:1,tableData:{data:[],total:0,current_page:1,perPage:10},assessmentForm:{},assessmentData:{},dialog:{title:"考核确认",assessment:!1,confirm:!1},detailList:[]}},created:function(){this.init()},methods:{init:function(){this.baseUrl=window.resourceBaseUrl},query:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r()(l.a.mark(function t(){var s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchData.perPage=10,e.searchData.page=a,t.next=4,e.$axios.send("EXAMINE_LIST",e.searchData);case 4:(s=t.sent)&&0===s.status_code&&!Array.isArray(s.result)&&(e.tableData=s.result);case 6:case"end":return t.stop()}},t,e)}))()},assessment:function(e){var a=this;return r()(l.a.mark(function t(){var s,n;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.updateType=e,s={id:a.currSelected.a_e_id},t.next=4,a.$axios.send("EXAMINE_DETAIL","",s);case 4:(n=t.sent)&&0===n.status_code?(a.dialog.assessment=!0,a.dialog.title=1===a.updateType?"考核确认":"确认修改",a.assessmentData=n.result,a.assessmentData.a_e_jg_id=a.assessmentData.a_e_jg_name?"":a.assessmentData.a_e_before_jg_id):(a.assessmentData={},a.assessmentData.a_e_d_data=[]);case 6:case"end":return t.stop()}},t,a)}))()},confirm:function(){this.dialog.title=1===this.updateType?"考核确认":"修改确认",this.dialog.assessment=!1,this.dialog.confirm=!0},assessmentAction:function(){var e=this;return r()(l.a.mark(function a(){var t,s,n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t={a_e_jg_id:e.assessmentData.a_e_jg_id,a_e_jg_name:e.assessmentData.a_e_jg_name,a_e_is_protection:e.assessmentData.a_e_is_protection},s=1===e.updateType?"EXAMINE_DISPOSE":"EXAMINE_DISPOSE_CONFIRM",a.next=4,e.$axios.send(s,t,{id:e.currSelected.a_e_id});case 4:(n=a.sent)&&0===n.status_code&&(e.$message.success("操作成功"),e.query(e.tableData.current_page)),e.dialog.confirm=!1;case 7:case"end":return a.stop()}},a,e)}))()},setJGName:function(e){this.assessmentData.a_e_jg_name=e},test:function(e){var a=this;return r()(l.a.mark(function t(){var s;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={type:e},t.next=3,a.$axios.send("RUN_TEST_SCRIPT",s);case 3:a.$message.success("执行成功");case 4:case"end":return t.stop()}},t,a)}))()}}},d={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{staticClass:"common-padding",attrs:{model:e.searchData,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"机构选择"}},[t("SelectChoose",{attrs:{placeholder:""},model:{value:e.searchData.o_id,callback:function(a){e.$set(e.searchData,"o_id",a)},expression:"searchData.o_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"组织名称"}},[t("el-input",{model:{value:e.searchData.t_name,callback:function(a){e.$set(e.searchData,"t_name",a)},expression:"searchData.t_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核前职级"}},[t("el-input",{model:{value:e.searchData.jg_name,callback:function(a){e.$set(e.searchData,"jg_name",a)},expression:"searchData.jg_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核月份"}},[t("el-date-picker",{attrs:{placeholder:"选择月份","value-format":"yyyy-MM","picker-options":e.disablePickerOptions,type:"month"},model:{value:e.searchData.a_e_time,callback:function(a){e.$set(e.searchData,"a_e_time",a)},expression:"searchData.a_e_time"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核建议"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.searchData.a_e_result,callback:function(a){e.$set(e.searchData,"a_e_result",a)},expression:"searchData.a_e_result"}},[t("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.Dict.ASSESS_SUGGEST,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"是否考核保护"}},[t("el-select",{attrs:{placeholder:""},model:{value:e.searchData.a_e_is_protection,callback:function(a){e.$set(e.searchData,"a_e_is_protection",a)},expression:"searchData.a_e_is_protection"}},[t("el-option",{attrs:{label:"请选择",value:""}}),e._v(" "),e._l(e.Dict.IS_PROTECTION,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_LIST",expression:"'EXAMINE_LIST'"}],attrs:{type:"primary"},on:{click:function(a){return e.query(1)}}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_DISPOSE",expression:"'EXAMINE_DISPOSE'"}],attrs:{type:"warning"},on:{click:function(a){return e.assessment(1)}}},[e._v("考核确认")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_DISPOSE_CONFIRM",expression:"'EXAMINE_DISPOSE_CONFIRM'"}],attrs:{type:"warning"},on:{click:function(a){return e.assessment(2)}}},[e._v("修改")])],1)],1),e._v(" "),e._e()],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"common-padding"},[t("el-table",{attrs:{data:e.tableData.data,"highlight-current-row":"",border:""},on:{"current-change":e.tableItemSelect}},[t("el-table-column",{attrs:{width:"80",label:"选择",fixed:"",prop:"name"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0,name:"selected"},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"o_name",label:"机构名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"t_name",label:"组织名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ag_job_number",label:"代理人工号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ag_name",label:"代理人姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_time",label:"考核月份"}}),e._v(" "),t("el-table-column",{attrs:{prop:"jg_name",label:"考核前职级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_result",label:"考核建议"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(e._f("dict")(a.row.a_e_result,"ASSESS_SUGGEST"))+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_is_protection",label:"是否考核保护"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n            "+e._s(e._f("dict")(a.row.a_e_is_protection,"IS_PROTECTION"))+"\n          ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_jg_name",label:"考核确认职级"}})],1)],1)]),e._v(" "),t("el-col",{attrs:{span:23}},[t("div",{staticClass:"footer-page"},[e.tableData.total>0?t("div",{staticClass:"common-paging"},[t("el-pagination",{attrs:{"current-page":e.tableData.current_page,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()])])],1),e._v(" "),t("base-dialog",{attrs:{title:e.dialog.title,isshow:e.dialog.assessment,width:"450px"},on:{"update:isshow":function(a){return e.$set(e.dialog,"assessment",a)}}},[t("div",[t("el-form",{model:{value:e.assessmentData,callback:function(a){e.assessmentData=a},expression:"assessmentData"}},[t("p",{staticClass:"pl40"},[e._v("业绩明细")]),e._v(" "),e._l(e.assessmentData.a_e_d_data,function(a){return t("el-form-item",{key:a.name,staticClass:"pl80",attrs:{label:a.name}},[e._v("\n          "+e._s(a.value)+"\n        ")])}),e._v(" "),t("p",{staticClass:"pl40"},[e._v("考核确认")]),e._v(" "),t("el-form-item",{staticClass:"pl80",attrs:{label:"考核前职级"}},[e._v(e._s(e.assessmentData.a_e_before_jg_name))]),e._v(" "),t("el-form-item",{staticClass:"pl80",attrs:{label:"考核预测"}},[e._v(e._s(e._f("dict")(e.assessmentData.a_e_result,"ASSESS_SUGGEST")))]),e._v(" "),t("el-form-item",{staticClass:"pl80",attrs:{label:"是否考核保护"}},[t("el-radio-group",{model:{value:e.assessmentData.a_e_is_protection,callback:function(a){e.$set(e.assessmentData,"a_e_is_protection",a)},expression:"assessmentData.a_e_is_protection"}},e._l(e.Dict.IS_PROTECTION,function(a){return t("el-radio",{key:a.value,attrs:{label:a.value}},[e._v(e._s(a.label))])}),1)],1),e._v(" "),t("el-form-item",{staticClass:"pl80",attrs:{label:"职级确认"}},[t("select-job-grade",{on:{jgName:e.setJGName},model:{value:e.assessmentData.a_e_jg_id,callback:function(a){e.$set(e.assessmentData,"a_e_jg_id",a)},expression:"assessmentData.a_e_jg_id"}})],1),e._v(" "),t("el-form-item",{staticClass:"tc pt20",attrs:{label:""}},[t("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialog.assessment=!1}}},[e._v("取 消")])],1)],2)],1)]),e._v(" "),t("base-dialog",{attrs:{title:e.dialog.title,isshow:e.dialog.confirm,width:"350px",height:"210px"},on:{"update:isshow":function(a){return e.$set(e.dialog,"confirm",a)}}},[t("p",{staticClass:"pl40"},[e._v("确定调整该人员职级为"+e._s(e.assessmentData.a_e_jg_name)+"？")]),e._v(" "),1===e.updateType?t("p",{staticClass:"pl40 red"},[e._v("本月26号生效，生效之后不允许修改")]):e._e(),e._v(" "),t("section",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:e.assessmentAction}},[e._v("确 定")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialog.confirm=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var v=t("VU/8")(p,d,!1,function(e){t("thsf")},"data-v-4fb021a4",null);a.default=v.exports},thsf:function(e,a){}});