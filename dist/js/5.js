webpackJsonp([5],{T5s2:function(e,a){},"d/1x":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),s=t.n(r),l=t("exGp"),o=t.n(l),n=t("gHwQ"),i=t("4U5d"),u={components:{BaseDialog:n.a},data:function(){var e=this;return{ruleForm:{o_id:"",o_code:"",role_id:"",u_name:"",password:"",verifypassword:"",u_phone:"",u_email:"",u_status:""},rules:{o_id:[{required:!0,message:"请选择所属机构",trigger:"change"}],role_id:[{required:!0,message:"请选择用户角色",trigger:"change"}],u_name:[{required:!0,message:"请填写用户名称",trigger:"blur"}],password:[{required:!0,validator:function(a,t,r){""===t?r(new Error("请输入密码")):(""!==e.ruleForm.verifypassword&&e.$refs.ruleForm.validateField("verifypassword"),r())},trigger:"blur"}],verifypassword:[{required:!0,validator:function(a,t,r){""===t?r(new Error("请再次输入密码")):t!==e.ruleForm.password?r(new Error("两次输入新密码不一致!")):r()},trigger:"blur"}],u_phone:[{required:!0,message:"请填写手机号",trigger:"blur"},{validator:i.a.phone,message:"手机号码格式不正确",trigger:"blur"}],u_email:[{required:!0,type:"email",message:"邮箱格式不正确",trigger:"blur"}],u_status:[{required:!0,message:"请选择用户状态",trigger:"change"}]},search:{u_name:"",role_id:"",u_status:"",page:1},pageNumber:{valuecurrentPage:1,currentPage:1},isDisabled:!1,dialogSet:{title:"新增用户",sendDialog:!1},listId:{},options:[],mark:Number,insOptions:[],tableData3:[],sumTotal:"",organiList:{},disabled:!1}},methods:{getData:function(){var e=this;return o()(s.a.mark(function a(){var t;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("USER_MANAGE_LIST",e.search);case 2:0===(t=a.sent).status_code&&(e.isDisabled=!1,e.tableData3=t.result.data,e.sumTotal=t.result.total,e.pageNumber.valuecurrentPage=e.pageNumber.currentPage);case 4:case"end":return a.stop()}},a,e)}))()},handleReset:function(){this.search={u_name:"",role_id:"",u_status:""}},handleSearch:function(){var e=this;return o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.search.page=1,e.pageNumber.currentPage=1,e.getData();case 3:case"end":return a.stop()}},a,e)}))()},addDialog:function(e){this.$refs[e].resetFields(),this.dialogSet.sendDialog=!0,this.dialogSet.title="新增用户",this.mark=1,this.disabled=!1},handleUpData:function(){var e=this;return o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.dialogSet.sendDialog=!0,e.dialogSet.title="修改用户",e.ruleForm.o_id=e.listId.o_id,e.ruleForm.role_id=e.listId.role_id,e.ruleForm.u_name=e.listId.u_name,e.ruleForm.u_phone=e.listId.u_phone,e.ruleForm.u_email=e.listId.u_email,e.ruleForm.u_status=e.listId.u_status,e.$refs.ruleForm.clearValidate("password"),e.$refs.ruleForm.clearValidate("verifypassword"),e.ruleForm.password="",e.ruleForm.verifypassword="",e.mark=2,e.disabled=!0;case 14:case"end":return a.stop()}},a,e)}))()},handelDelete:function(){var e=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("USER_MANAGE_DELETE","",{id:e.listId.u_id});case 2:0===a.sent.status_code&&(e.tableData3.length-1==0&&(e.search.page=e.pageNumber.currentPage-1),e.getData(),e.$message({type:"success",message:"删除成功!"}),e.isDisabled=!1);case 4:case"end":return a.stop()}},a,e)}))).catch(function(){e.$message({type:"info",message:"已取消删除"})})},ruleformAdd:function(){var e=this;this.organiList.map(function(a){e.ruleForm.o_id===a.o_id&&(e.ruleForm.o_code=a.o_code)})},dialogSave:function(e){var a=this;return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.$refs[e].validate(function(){var e=o()(s.a.mark(function e(t){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=15;break}if(r=void 0,a.ruleformAdd(),1!==a.mark){e.next=9;break}return e.next=6,a.$axios.send("USER_MANAGE_ADD",a.ruleForm);case 6:r=e.sent,e.next=12;break;case 9:return e.next=11,a.$axios.send("USER_MANAGE_EDIT",a.ruleForm,{id:a.listId.u_id});case 11:r=e.sent;case 12:0===r.status_code&&(a.$message({type:"success",message:"操作成功"}),a.getData(),a.dialogSet.sendDialog=!1),e.next=16;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,a)}));return function(a){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,a)}))()},handleCurrentChange:function(e){this.pageNumber.currentPage=e,this.search.page=this.pageNumber.currentPage,this.getData()},handleSelectTable:function(e,a){e&&(e.selected=!0,this.listId=e,this.isDisabled=!0),a&&(a.selected=!1)},getReqData:function(){var e=this;return o()(s.a.mark(function a(){var t,r,l,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_ROLE_LIST");case 2:0===(t=a.sent).status_code&&(r=void 0,l=void 0,o=[],t.result.map(function(e){r=e.r_name,l=e.r_id,o.push({value:l,label:r})}),e.options=o);case 4:case"end":return a.stop()}},a,e)}))()},getInsReqData:function(){var e=this;return o()(s.a.mark(function a(){var t,r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.send("SELECT_ORGANI_LIST",{o_name:"",o_g_id:"",o_status:""});case 2:0===(t=a.sent).status_code&&(e.organiList=t.result,r=void 0,l=void 0,t.result.map(function(a){r=a.o_name,l=a.o_id,e.insOptions.push({value:l,label:r})}));case 4:case"end":return a.stop()}},a,e)}))()}},created:function(){this.getReqData(),this.getInsReqData()},activated:function(){this.getReqData()}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"userPage-wrap"},[t("section",{staticClass:"header-title"},[e._v("用户管理")]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{attrs:{model:e.search,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"用户角色"}},[t("el-select",{model:{value:e.search.role_id,callback:function(a){e.$set(e.search,"role_id",a)},expression:"search.role_id"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"用户名称"}},[t("el-input",{model:{value:e.search.u_name,callback:function(a){e.$set(e.search,"u_name",a)},expression:"search.u_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"用户状态"}},[t("el-select",{model:{value:e.search.u_status,callback:function(a){e.$set(e.search,"u_status",a)},expression:"search.u_status"}},e._l(e.Dict.USER_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("div",{staticClass:"pageIncrem-height"}),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"USER_MANAGE_LIST",expression:"'USER_MANAGE_LIST'"}],attrs:{type:"primary",size:"medium"},on:{click:e.handleSearch}},[e._v("查询")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"USER_MANAGE_ADD",expression:"'USER_MANAGE_ADD'"}],staticClass:"elButtonSearch",attrs:{type:"primary",size:"medium"},on:{click:function(a){return e.addDialog("ruleForm")}}},[e._v("新增")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"USER_MANAGE_EDIT",expression:"'USER_MANAGE_EDIT'"}],attrs:{type:"warning",size:"medium",disabled:!e.isDisabled},on:{click:e.handleUpData}},[e._v("修改")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"USER_MANAGE_DELETE",expression:"'USER_MANAGE_DELETE'"}],attrs:{type:"danger",size:"medium",disabled:!e.isDisabled},on:{click:e.handelDelete}},[e._v("删除")]),e._v(" "),t("el-button",{directives:[{name:"has",rawName:"v-has",value:"USER_MANAGE_LIST",expression:"'USER_MANAGE_LIST'"}],attrs:{type:"info",size:"medium"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"common-padding"},[t("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData3,border:"","highlight-current-row":""},on:{"current-change":e.handleSelectTable}},[t("el-table-column",{attrs:{fixed:"",label:"选择",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-radio",{attrs:{label:!0},model:{value:a.row.selected,callback:function(t){e.$set(a.row,"selected",t)},expression:"scope.row.selected"}},[e._v(" ")])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"date",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(e._s(a.$index+10*(e.pageNumber.valuecurrentPage-1)+1))]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"u_name",label:"用户名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"r_name",label:"用户角色"}}),e._v(" "),t("el-table-column",{attrs:{prop:"u_phone",label:"手机号码"}}),e._v(" "),t("el-table-column",{attrs:{prop:"u_email",label:"邮箱"}}),e._v(" "),t("el-table-column",{attrs:{label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(e._f("dict")(a.row.u_status,"USER_STATUS")))])]}}])})],1)],1),e._v(" "),t("section",{staticClass:"footer-page"},[t("div",{staticClass:"common-paging"},[e.sumTotal?t("el-pagination",{attrs:{"current-page":e.pageNumber.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumTotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)]),e._v(" "),t("BaseDialog",{attrs:{title:e.dialogSet.title,isshow:e.dialogSet.sendDialog,width:"537px",height:"729px"},on:{"update:isshow":function(a){return e.$set(e.dialogSet,"sendDialog",a)}}},[t("section",{staticClass:"dialog-center"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"190px"}},[t("el-row",[t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"所属机构",prop:"o_id"}},[t("el-select",{model:{value:e.ruleForm.o_id,callback:function(a){e.$set(e.ruleForm,"o_id",a)},expression:"ruleForm.o_id"}},e._l(e.insOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"用户角色",prop:"role_id"}},[t("el-select",{model:{value:e.ruleForm.role_id,callback:function(a){e.$set(e.ruleForm,"role_id",a)},expression:"ruleForm.role_id"}},e._l(e.options,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"用户名称",prop:"u_name"}},[t("el-input",{attrs:{disabled:e.disabled},model:{value:e.ruleForm.u_name,callback:function(a){e.$set(e.ruleForm,"u_name",a)},expression:"ruleForm.u_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"登录密码",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(a){e.$set(e.ruleForm,"password",a)},expression:"ruleForm.password"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"确认密码",prop:"verifypassword"}},[t("el-input",{attrs:{type:"password",offset:1},model:{value:e.ruleForm.verifypassword,callback:function(a){e.$set(e.ruleForm,"verifypassword",a)},expression:"ruleForm.verifypassword"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"手机号码",prop:"u_phone"}},[t("el-input",{model:{value:e.ruleForm.u_phone,callback:function(a){e.$set(e.ruleForm,"u_phone",a)},expression:"ruleForm.u_phone"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"电子邮箱",prop:"u_email"}},[t("el-input",{model:{value:e.ruleForm.u_email,callback:function(a){e.$set(e.ruleForm,"u_email",a)},expression:"ruleForm.u_email"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{staticClass:"userPage-dialog",attrs:{label:"用户状态",prop:"u_status"}},[t("el-select",{model:{value:e.ruleForm.u_status,callback:function(a){e.$set(e.ruleForm,"u_status",a)},expression:"ruleForm.u_status"}},e._l(e.Dict.USER_STATUS,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1)],1),e._v(" "),t("section",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"success"},on:{click:function(a){return e.dialogSave("ruleForm")}}},[e._v("保 存")]),e._v(" "),t("el-button",{on:{click:function(a){e.dialogSet.sendDialog=!1}}},[e._v("取 消")])],1)])],1)},staticRenderFns:[]};var d=t("VU/8")(u,c,!1,function(e){t("T5s2")},"data-v-9accd062",null);a.default=d.exports}});