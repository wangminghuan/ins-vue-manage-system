webpackJsonp([11],{QsTn:function(e,t){},cTMb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),n=a("exGp"),o=a.n(n),l=a("Z1YF"),i={name:"StatisticalReportList",data:function(){return{ruleForm:{time:"",search_oid:"",search_cid:"",search_pid:"",search_type:"",search_time_start:"",search_time_end:"",page:1},search:{},loading:!1,currentPage:1,options:[],font:"",Baoptions:[],productOptions:[],pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},tableData3:[],sumtotal:"",totalData:{}}},computed:{searchCid:function(){return this.ruleForm.search_cid}},watch:{searchCid:function(e){this.ruleForm.search_pid="",this.getTalData(e)}},methods:{handleTime:function(e){e instanceof Array?(this.ruleForm.search_time_start=this.$moment(e[0]).format("YYYY-MM-DD"),this.ruleForm.search_time_end=this.$moment(e[1]).format("YYYY-MM-DD")):(this.ruleForm.search_time_start="",this.ruleForm.search_time_end="")},getData:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleTime(e.ruleForm.time),t.next=3,e.$axios.send("REPORT_MANAGE_LIST",e.ruleForm);case 3:0===(a=t.sent).status_code&&(e.tableData3=a.result.listData.data,e.sumtotal=a.result.listData.total,e.totalData=a.result.totalData);case 5:case"end":return t.stop()}},t,e)}))()},handleSearch:function(){var e=this;return o()(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.currentPage=1,e.ruleForm.page=1,e.getData();case 3:case"end":return t.stop()}},t,e)}))()},handleExil:function(){var e=this;return o()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.handleTime(e.ruleForm.time),t.next=3,e.$axios.post("/exportReport",e.ruleForm,{responseType:"blob"});case 3:a=t.sent,l.a.downloadFile(a,"报表统计.xlsx");case 5:case"end":return t.stop()}},t,e)}))()},handleReset:function(){this.ruleForm={time:"",search_oid:"",search_cid:"",search_pid:"",search_type:"",search_time_start:"",search_time_end:""}},remoteMethod:function(e){""!==e&&(this.loading=!0)},handleCurrentChange:function(e){this.currentPage=e,this.ruleForm.page=this.currentPage,this.getData()},change:function(e){switch(Number(e)){case 1:var t=l.a.getStartDate(this).split("-");this.ruleForm.time=[new Date(t[0],t[1]-1,t[2]),new Date(t[0],t[1]-1,t[2])];break;case 2:var a=l.a.getStartWeek(this),r=a[0].split("-"),s=a[1].split("-");this.ruleForm.time=[new Date(r[0],r[1]-1,r[2]),new Date(s[0],s[1]-1,s[2])];break;case 3:var n=l.a.getStartMonth(this);this.ruleForm.time=[new Date(n[0],n[1]-1,n[2]),new Date(n[0],n[1]-1,n[3])];break;case 4:var o=l.a.getStartSeason(this);this.ruleForm.time=[new Date(o[0],o[1]-3,o[2]),new Date(o[0],o[1]-1,o[3])];break;case 5:var i=l.a.getStartYears(this);this.ruleForm.time=[new Date(i[0],0,1),new Date(i[0],11,31)];break;default:this.ruleForm.time=""}},getReqData:function(){var e=this;return o()(s.a.mark(function t(){var a,r,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.send("SELECT_ORGANI_LIST",{o_name:"",o_g_id:"",o_status:""});case 2:0===(a=t.sent).status_code&&(r=void 0,n=void 0,a.result.map(function(t){r=t.o_name,n=t.o_id,e.options.push({value:n,label:r})}));case 4:case"end":return t.stop()}},t,e)}))()},getSelectData:function(){var e=this;return o()(s.a.mark(function t(){var a,r,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.send("SELECT_COMPANY_LIST");case 2:0===(a=t.sent).status_code&&(r=void 0,n=void 0,a.result.map(function(t){r=t.c_name,n=t.c_id,e.Baoptions.push({value:n,label:r})}));case 4:case"end":return t.stop()}},t,e)}))()},getTalData:function(e){var t=this;return o()(s.a.mark(function a(){var r,n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.productOptions=[],a.next=3,t.$axios.send("SELECT_PRODUCT_LIST",{search_cid:e||""});case 3:0===(r=a.sent).status_code&&(n=void 0,o=void 0,r.result.map(function(e){n=e.p_name,o=e.p_id,t.productOptions.push({value:o,label:n})}));case 5:case"end":return a.stop()}},a,t)}))()}},created:function(){this.getReqData(),this.getSelectData(),this.getTalData()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"statisticalReport-wrap"},[a("section",{staticClass:"header-title"},[e._v("保费统计")]),e._v(" "),a("section",{staticClass:"static-head common-padding"},[a("el-form",{attrs:{model:e.ruleForm,"label-width":"100px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"机构选择"}},[a("el-select",{attrs:{filterable:"",loading:e.loading,"remote-method":e.remoteMethod},model:{value:e.ruleForm.search_oid,callback:function(t){e.$set(e.ruleForm,"search_oid",t)},expression:"ruleForm.search_oid"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"保险公司"}},[a("el-select",{model:{value:e.ruleForm.search_cid,callback:function(t){e.$set(e.ruleForm,"search_cid",t)},expression:"ruleForm.search_cid"}},e._l(e.Baoptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"保险产品"}},[a("el-select",{model:{value:e.ruleForm.search_pid,callback:function(t){e.$set(e.ruleForm,"search_pid",t)},expression:"ruleForm.search_pid"}},e._l(e.productOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}}),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"承保日期"}},[a("el-date-picker",{staticClass:"picker-width",attrs:{type:"daterange","picker-options":e.pickerOptions2,"value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:""}},[a("el-radio-group",{on:{change:e.change},model:{value:e.ruleForm.search_type,callback:function(t){e.$set(e.ruleForm,"search_type",t)},expression:"ruleForm.search_type"}},[a("el-radio",{attrs:{label:1,border:""}},[e._v("日报表")]),e._v(" "),a("el-radio",{attrs:{label:2,border:""}},[e._v("周报表")]),e._v(" "),a("el-radio",{attrs:{label:3,border:""}},[e._v("月报表")]),e._v(" "),a("el-radio",{attrs:{label:4,border:""}},[e._v("季报表")]),e._v(" "),a("el-radio",{attrs:{label:5,border:""}},[e._v("年报表")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:""}},[a("el-button",{directives:[{name:"has",rawName:"v-has",value:"REPORT_MANAGE_LIST",expression:"'REPORT_MANAGE_LIST'"}],staticClass:"elButtonSearch",attrs:{type:"primary"},on:{click:function(t){return e.handleSearch(e.search)}}},[e._v("查询")]),e._v(" "),a("el-button",{directives:[{name:"has",rawName:"v-has",value:"EXPORT_MANAGE_LIST",expression:"'EXPORT_MANAGE_LIST'"}],attrs:{type:"success"},on:{click:e.handleExil}},[e._v("导出")]),e._v(" "),a("a",{attrs:{id:"export",href:""}}),e._v("  \n            "),a("el-button",{attrs:{type:"info"},on:{click:e.handleReset}},[e._v("重置")])],1)],1)],1)],1)],1),e._v(" "),a("section",{staticClass:"static-table common-padding"},[a("el-table",{staticStyle:{width:"100%","text-align":"center"},attrs:{data:e.tableData3,border:""}},[a("el-table-column",{attrs:{prop:"o_name",label:"出单机构"}}),e._v(" "),a("el-table-column",{attrs:{prop:"p_name",label:"产品名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bd_code",label:"保单号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sp_premium",label:"保费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sp_standard",label:"标准保费"}}),e._v(" "),a("el-table-column",{attrs:{prop:"c_name",label:"保险公司"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bd_time",label:"承保日期"}})],1)],1),e._v(" "),a("section",{staticClass:"footer-page"},[e.sumtotal?a("span",{staticClass:"common-pageFont"},[e.totalData.premium?a("span",[e._v("保费共计"+e._s(e.totalData.premium)+"元,")]):e._e(),e._v(" "),e.totalData.standard?a("span",[e._v("标准保费"+e._s(e.totalData.standard)+"元,")]):e._e(),e._v(" "),e.totalData.policy?a("span",[e._v("保单"+e._s(e.totalData.policy)+"件。")]):e._e()]):e._e(),e._v(" "),a("section",{staticClass:"common-paging"},[e.sumtotal?a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.sumtotal},on:{"current-change":e.handleCurrentChange}}):e._e()],1)])])},staticRenderFns:[]};var u=a("VU/8")(i,c,!1,function(e){a("QsTn")},null,null);t.default=u.exports}});