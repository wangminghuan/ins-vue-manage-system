webpackJsonp([6],{CIYD:function(e,a){},LbaK:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=t("Xxa5"),r=t.n(l),s=t("exGp"),n=t.n(s),o=t("HGAp"),i=t("laOz"),c=t("Z1YF"),_=t("PcmU"),u=t("gHwQ"),p=t("PJh5"),m=t.n(p),d={mixins:[_.a],components:{BaseDialog:u.a,SelectChoose:o.a,SelectJobGrade:i.a},data:function(){return{searchData:{a_e_time:m()().format("YYYY-MM")},currSelected:null,tableData:{data:[],total:0,current_page:1,perPage:10},dialog:{detail:!1},detailList:[]}},created:function(){this.init()},methods:{init:function(){this.baseUrl=window.resourceBaseUrl},query:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return n()(r.a.mark(function t(){var l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.searchData.perPage=10,e.searchData.page=a,t.next=4,e.$axios.send("EXAMINE_RESULT_LIST",e.searchData);case 4:(l=t.sent)&&0===l.status_code&&(e.tableData=l.result);case 6:case"end":return t.stop()}},t,e)}))()},detail:function(e){var a=this;return n()(r.a.mark(function t(){var l;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$axios.send("EXAMINE_RESULT_DETAIL",{ag_id:e.ag_id},{id:e.a_e_id});case 2:(l=t.sent)&&0===l.status_code&&(a.detailList=l.result,a.dialog.detail=!0);case 4:case"end":return t.stop()}},t,a)}))()},upload:function(e){var a=this;return n()(r.a.mark(function t(){var l,s,n,o,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.loading=!0,l=e.file,s="/examine/result/import",(n=new FormData).append("file",l),o={headers:{"Content-Type":"multipart/form-data"},responseType:"blob"},t.next=8,a.$axios.post(s,n,o);case 8:(i=t.sent)&&0===i.status_code?(a.loading=!1,a.$message.success("考核轨迹导入完成")):(a.$message.error("导入失败"),c.a.downloadFile(i,"错误数据.xlsx"));case 10:case"end":return t.stop()}},t,a)}))()}}},b={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("section",{staticClass:"header-title"},[e._v(e._s(e.$route.name))]),e._v(" "),t("div",{staticClass:"mb30"}),e._v(" "),t("el-form",{staticClass:"common-padding",attrs:{model:e.searchData,"label-width":"120px"}},[t("el-row",[t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"机构选择"}},[t("SelectChoose",{attrs:{placeholder:""},model:{value:e.searchData.o_id,callback:function(a){e.$set(e.searchData,"o_id",a)},expression:"searchData.o_id"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"组织名称"}},[t("el-input",{model:{value:e.searchData.t_name,callback:function(a){e.$set(e.searchData,"t_name",a)},expression:"searchData.t_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核前职级"}},[t("el-input",{attrs:{placeholder:""},model:{value:e.searchData.a_e_before_jg_name,callback:function(a){e.$set(e.searchData,"a_e_before_jg_name",a)},expression:"searchData.a_e_before_jg_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人工号"}},[t("el-input",{model:{value:e.searchData.ag_job_number,callback:function(a){e.$set(e.searchData,"ag_job_number",a)},expression:"searchData.ag_job_number"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"代理人姓名"}},[t("el-input",{model:{value:e.searchData.ag_name,callback:function(a){e.$set(e.searchData,"ag_name",a)},expression:"searchData.ag_name"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-form-item",{attrs:{label:"考核月份"}},[t("el-date-picker",{attrs:{placeholder:"选择月份","value-format":"yyyy-MM","picker-options":e.disablePickerOptions,type:"month"},model:{value:e.searchData.a_e_time,callback:function(a){e.$set(e.searchData,"a_e_time",a)},expression:"searchData.a_e_time"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:24}},[t("el-form-item",{attrs:{label:""}},[t("el-button",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_RESULT_LIST",expression:"'EXAMINE_RESULT_LIST'"}],staticClass:"fl mr10",attrs:{type:"primary"},on:{click:function(a){return e.query(1)}}},[e._v("查询")]),e._v(" "),t("el-upload",{staticClass:"import-btn fl mr10",attrs:{action:"upload","http-request":e.upload,"show-file-list":!1,accept:".xls, .xlsx"}},[t("span",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_RESULT_IMPORT",expression:"'EXAMINE_RESULT_IMPORT'"}]},[t("el-button",{attrs:{type:"primary",size:"medium"}},[e._v("考核轨迹导入")])],1)]),e._v(" "),t("a",{directives:[{name:"has",rawName:"v-has",value:"EXAMINE_RESULT_EXPORT",expression:"'EXAMINE_RESULT_EXPORT'"}],staticClass:"el-button el-button--primary el-button--medium no-underline fl",attrs:{href:e.baseUrl+"template/考核结果导入模板.xlsx",download:"考核结果导入模板.xlsx",type:"primary",size:"small"}},[e._v("导入模板下载")])],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"common-padding"},[t("el-table",{attrs:{data:e.tableData.data,"highlight-current-row":"",border:""}},[t("el-table-column",{attrs:{prop:"ag_job_number",label:"代理人工号"}}),e._v(" "),t("el-table-column",{attrs:{prop:"ag_name",label:"代理人姓名"}}),e._v(" "),t("el-table-column",{attrs:{prop:"o_name",label:"机构名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"t_name",label:"组织名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_before_jg_name",label:"考核前职级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_after_jg_name",label:"考核后职级"}}),e._v(" "),t("el-table-column",{attrs:{prop:"a_e_time",label:"考核月份"}}),e._v(" "),t("el-table-column",{attrs:{label:"考核轨迹"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{color:"#6797EC",cursor:"pointer"},on:{click:function(t){return e.detail(a.row)}}},[e._v("详情")])]}}])})],1)],1)]),e._v(" "),t("el-col",{attrs:{span:23}},[t("div",{staticClass:"footer-page"},[e.tableData.total>0?t("div",{staticClass:"common-paging"},[t("el-pagination",{attrs:{"current-page":e.tableData.current_page,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.tableData.total},on:{"current-change":e.handleCurrentChange}})],1):e._e()])])],1),e._v(" "),t("base-dialog",{attrs:{title:"分配轨迹",isshow:e.dialog.detail,width:"600px"},on:{"update:isshow":function(a){return e.$set(e.dialog,"detail",a)}}},[t("el-table",{staticStyle:{"padding-bottom":"50px"},attrs:{data:e.detailList}},[t("el-table-column",{attrs:{label:"考核日期",prop:"a_e_time"}}),e._v(" "),t("el-table-column",{attrs:{label:"考核期职级",prop:"a_e_before_jg_name"}}),e._v(" "),t("el-table-column",{attrs:{label:"考核后职级",prop:"a_e_after_jg_name"}})],1)],1)],1)},staticRenderFns:[]};var v=t("VU/8")(d,b,!1,function(e){t("CIYD")},"data-v-6e69a29e",null);a.default=v.exports}});